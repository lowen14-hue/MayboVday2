<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Severance Vâ€‘Day Macrodata</title>
<style>
body {
    margin: 0;
    font-family: monospace;
    background: #001f4d; /* deep blue */
    overflow: hidden;
    color: #fff;
}

#grid {
    display: grid;
    grid-template-columns: repeat(25, 50px);
    grid-template-rows: repeat(10, 50px);
    gap: 2px;
    width: 100vw;
    height: 100vh;
    position: relative;
}

.cell {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    user-select: none;
    cursor: pointer;
    transition: transform 0.15s; /* hover enlarge */
    color: #fff;
}

.cell:hover {
    transform: scale(1.4); /* subtle growth on hover */
}

#bucket {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 22px;
    font-weight: bold;
}

#message {
    position: fixed;
    top: 42%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 32px;
    color: #ff4d6d;
    display: none;
    text-align: center;
}
</style>
</head>
<body>

<div id="grid"></div>
<div id="bucket">Found: 0/6</div>
<div id="message">Makaylaâ€¦ will you be my Valentine! ðŸ’Œ</div>

<script>
// Hidden sequences (3 digits per word)
const codes = [
    {digits:["0","9","2"], word:"Makayla,"},
    {digits:["1","1","8"], word:"will"},
    {digits:["2","0","5"], word:"you"},
    {digits:["4","0","2"], word:"be"},
    {digits:["3","1","9"], word:"my"},
    {digits:["5","8","3"], word:"Valentine?"}
];

const rows = 10;
const cols = 25;
let found = [];

// Build grid
const grid = document.getElementById("grid");
let cells = [];
for(let i=0; i<rows*cols; i++){
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = Math.floor(Math.random()*10); // random digit
    grid.appendChild(cell);
    cells.push(cell);
    // drifting motion setup
    cell.dataset.dx = (Math.random()*2-1)*0.3;
    cell.dataset.dy = (Math.random()*2-1)*0.3;
    cell.dataset.x = 0;
    cell.dataset.y = 0;
}

// Place each 3-digit code horizontally
codes.forEach(codeObj => {
    let placed=false;
    while(!placed){
        const start = Math.floor(Math.random() * (cells.length-3));
        const colStart = start % cols;
        if(colStart <= cols - 3){
            for(let i=0;i<3;i++){
                let c = cells[start+i];
                c.textContent = codeObj.digits[i];
                c.dataset.code = codeObj.word;
                c.classList.add("correct");
            }
            placed = true;
        }
    }
});

// Track progress
let progress = {};
codes.forEach(c=>progress[c.word]=0);

// Animate drifting and flicker
function animate(){
    cells.forEach(cell=>{
        let x = +cell.dataset.x;
        let y = +cell.dataset.y;
        let dx = +cell.dataset.dx;
        let dy = +cell.dataset.dy;

        // bounce back
        if(Math.abs(x+dx)>2) dx=-dx;
        if(Math.abs(y+dy)>2) dy=-dy;
        x += dx;
        y += dy;
        cell.dataset.x = x;
        cell.dataset.y = y;
        cell.dataset.dx = dx;
        cell.dataset.dy = dy;

        // subtle green glow flicker
        const glow = Math.random()*2+2;
        cell.style.textShadow = `0 0 ${glow}px #0f0, 0 0 ${glow*2}px #0f0`;

        cell.style.transform = `translate(${x}px, ${y}px)`;
    });
    requestAnimationFrame(animate);
}
animate();

// Click to bucket animation
const bucket = document.getElementById("bucket");
grid.addEventListener("click", e=>{
    if(e.target.classList.contains("correct")){
        const w = e.target.dataset.code;
        if(progress[w] < 3){
            progress[w]++;
            // flying animation
            const rect = e.target.getBoundingClientRect();
            const bRect = bucket.getBoundingClientRect();
            const clone = e.target.cloneNode(true);
            clone.style.position = "fixed";
            clone.style.left = rect.left+"px";
            clone.style.top = rect.top+"px";
            clone.style.transition = "all 0.7s ease-in-out";
            document.body.appendChild(clone);
            setTimeout(()=>{
                clone.style.left = bRect.left + bRect.width/2 + "px";
                clone.style.top = bRect.top + "px";
                clone.style.transform = "scale(0.6)";
                clone.style.opacity = "0.5";
            },10);
            setTimeout(()=>clone.remove(),800);
        }
        e.target.style.pointerEvents="none"; // prevent double-click

        // update bucket count
        if(progress[w]===3 && !found.includes(w)){
            found.push(w);
            bucket.textContent = `Found: ${found.length}/6`;
        }

        // reveal final message
        if(found.length===codes.length){
            document.getElementById("message").style.display="block";
        }
    }
});
</script>

</body>
</html>
